<!-- _includes/recent_posts.html -->
<section class="recent-posts-section {% if include.background_class %}{{ include.background_class }}{% endif %}">
    <div class="container">
      <h2 class="section-title">{{ include.title | default: "Upcoming Events" }}</h2>
      {% if include.description %}
      <p class="section-description">{{ include.description }}</p>
      {% endif %}
      
      <div class="recent-posts-grid">
        {% assign post_limit = include.limit | default: 3 %}
        {% for post in site.posts limit: post_limit %}
        {% assign event_date_parts = post.event_dates | split: "," | first | split: " " %}
        {% assign event_month = event_date_parts[0] %}
        {% assign event_day = event_date_parts[1] | plus: 0 %}
        
        <div class="post-card">
          <div class="post-image">
            {% if post.featured_image %}
            <img src="{{ post.featured_image }}" alt="{{ post.title }}">
            {% else %}
            <img src="/assets/images/events/default-event.jpg" alt="{{ post.title }}">
            {% endif %}
            <div class="post-date">
              <span class="month">{{ event_month }}</span>
              <span class="day">{{ event_day }}</span>
            </div>
          </div>
          <div class="post-details">
            <h3 class="post-title"><a href="{{ post.url }}">{{ post.title }}</a></h3>
            <div class="post-meta">
              <span class="post-dates">{{ post.event_dates }}</span>
              <span class="post-location">{{ post.location }}</span>
            </div>
            <div class="post-excerpt">
              {{ post.excerpt | strip_html | truncatewords: 20 }}
            </div>
            <a href="{{ post.url }}" class="btn btn-small">Learn More</a>
          </div>
        </div>
        {% endfor %}
      </div>
      
      {% if include.show_view_all != false %}
      <div class="view-all-link">
        <a href="{{ include.view_all_link | default: '/events/' }}" class="btn">{{ include.view_all_text | default: "View All Events" }}</a>
      </div>
      {% endif %}
    </div>
  </section>